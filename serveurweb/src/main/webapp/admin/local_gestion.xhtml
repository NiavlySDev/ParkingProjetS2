<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="jakarta.faces.core">

    <h:head>
        <title>Gestion des Locaux - Administration</title>
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/style.css" />

        <script type="text/javascript">
            function toggleDarkMode() {
                document.body.classList.toggle('dark-mode');
                if(document.body.classList.contains('dark-mode')) {
                    localStorage.setItem('darkMode', '1');
                } else {
                    localStorage.removeItem('darkMode');
                }
            }
            window.onload = function() {
                if(localStorage.getItem('darkMode') === '1') {
                    document.body.classList.add('dark-mode');
                }
            }
        </script>
    </h:head>
    <h:body>
        <button onclick="toggleDarkMode()" style="position:fixed; top:20px; right:24px; z-index:1000; border-radius:18px; padding:8px 18px; background:#ececec; border:none; color:#222; font-weight:600; cursor:pointer;">
            üåô/‚òÄÔ∏è Mode
        </button>
        <br/>
        <h2>Gestion des Locaux</h2>
        <p:dataTable id="local" var="local" value="#{localBean.locaux}" style="margin-bottom:24px;">
            <p:column headerText="Num√©ro">
                <h:outputText value="#{local.numero}" />
            </p:column>
        </p:dataTable>
        
        <br/>
        
        <h2>Actions: </h2>
        
        <p:commandButton value="Cr√©er Local" type="button" icon="pi pi-plus" styleClass="rounded-button ui-button-success" onclick="PF('creation').show()"/> &nbsp;
        
        <p:dialog header="Cr√©ation Local" widgetVar="creation" minHeight="40" width="350" showEffect="fade">
            <h4>Num√©ro :</h4>
            <p:inputNumber value="#{ajouterLocalBean.id}" minValue="0"/><br/>
            <f:facet name="footer">
                <p:commandButton value="Cr√©er Local"
                                 icon="pi pi-plus"
                                 styleClass="rounded-button ui-button-success"
                                 action="#{ajouterLocalBean.ajouter()}"
                                 update="index:fragmentPanel messageindex message index:tabMenu user"/>
            </f:facet>
        </p:dialog>
        
        <p:commandButton value="Supprimer Local" type="button" icon="pi pi-times" styleClass="rounded-button ui-button-danger" onclick="PF('suppression').show()"/>
                
        <p:dialog header="Suppression Local" widgetVar="suppression" minHeight="40" width="350" showEffect="fade">
            <h4>Local :</h4>
            <p:selectOneMenu value="#{supprimerLocalBean.id}">
                <f:selectItems value="#{localSelectBean.sallesGroupes}"/>
            </p:selectOneMenu>
            <f:facet name="footer">
                <p:commandButton value="Supprimer Local"
                                 icon="pi pi-times"
                                 styleClass="rounded-button ui-button-warning"
                                 action="#{supprimerLocalBean.supprimer()}"
                                 update="index:fragmentPanel messageindex message index:tabMenu user"/>
            </f:facet>
        </p:dialog>
    </h:body>
</html>